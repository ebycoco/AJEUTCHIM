{% extends 'base.html.twig' %}

{% block title %}New Bureau
{% endblock %}

{% block body %}
	<div class="container">
		<h1>Create new Bureau</h1>
		<div class="row">
			<div class="col-md-4">
				{{ include('bureau/_form.html.twig') }}
			</div>
			<div class="col-md-8">
				<div class="row">
					<div class="col">
						{% for message in app.flashes('warning') %}
							<div class="alert alert-warning">
								{{ message }}
							</div>
						{% endfor %}
						{% for message in app.flashes('success') %}
							<div class="alert alert-success">
								{{ message }}
							</div>
						{% endfor %}
						{% for noubeauPresident in noubeauPresident %}
							<h3 class="text-center">
								Bureau de
								{{noubeauPresident.membre.nom}}
								{{noubeauPresident.membre.prenom}}
							</h3>
						{% endfor %}

						{# <h5 class="text-center"> son <span class="text-primary">{{ bureau.mandat }}</span> 																									</h5> #}
					</div>
				</div>
				<div class="row">
					<div class="col">
						<table class="table table-sm table-borderless">
							<thead class="thead-dark">
								<tr>
									<th scope="col">Post</th>
									<th scope="col">Nom</th>
									<th scope="col">Prenom</th>
									<th scope="col">actions</th>
								</tr>
							</thead>
							<tbody>
								{% for bureau in bureaus %}
									<tr {% if bureau.postAjeutchim.name =="Président" %} class="table-primary" {% endif %}>
										<th scope="row">{{bureau.postAjeutchim.name}}</th>
										<td>{{bureau.membre.nom}}</td>
										<td>{{bureau.membre.prenom}}</td>
										<td>
											{% for noubeauPresident in noubeauPresident %}
												{% if bureau.membre.id == noubeauPresident.membre.id  %}
													{% if noubeauPresident.membre.prenom == bureau.membre.prenom %}
													{% if bureau.postAjeutchim.name =="Président" %}
														<a href="{{ path('president_edit', {'id': noubeauPresident.id}) }}" class="btn btn-primary">Fin mandat</a>
													{% else %} 
														<a href="{{ path('bureau_edit', {'id': bureau.id}) }}" class="btn btn-warning">Modifier</a>
													{% endif %}

													{% else %}
														<a href="{{ path('bureau_edit', {'id': bureau.id}) }}" class="btn btn-danger">changer</a>
													{% endif %}
												{% elseif bureau.membre.id != 1 %}
													<a href="{{ path('bureau_edit', {'id': bureau.id}) }}" class="btn btn-warning">Modifier</a>

													{% else %}


												{% endif %}
											{% endfor %}
										</td>
									</tr>
								{% else %}
									<tr>
										<td colspan="5">no records found</td>
									</tr>
								{% endfor %}
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>


		<a href="{{ path('bureau_index') }}">back to list</a>
	</div>
{% endblock %}
